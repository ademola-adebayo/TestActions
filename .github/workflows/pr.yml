name: PR
on:
  pull_request:
  workflow_dispatch:
    
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repository
        uses: actions/checkout@v2

      - name: Set up Node
        uses: actions/setup-node@v2
        with:
          node-version: 14

      - name: Install package.json dependencies with Yarn
        run: yarn
  e2e-tests:
    runs-on: ubuntu-latest
    needs: [build]
    steps:
      - name: Build and start application
        run: echo "This is where you boot your application for testing"

      # - name: Run end-to-end Cypress tests
      #   uses: cypress-io/github-action@v2

      # - name: Archive test screenshots
      #   if: failure()
      #   uses: actions/upload-artifact@v2
      #   with:
      #     name: screenshots
      #     path: cypress/screenshots
  system-test:
    runs-on: ubuntu-latest
    needs: [build]
    steps:
      - name: Checkout syestem tests repo 
        uses: actions/checkout@v3
        with:
          repository: 'ademola-adebayo/cicd-poc'
          path: './system-tests'
          # token: ''

      - name: Get into the system-tests folder and run the test
        run: |
          cd ./system-tests
          ls -R
          echo "test running..."


  code-quality:
    runs-on: ubuntu-latest
    needs: [build]
    steps:
      - name: check formating with prettier
        run: echo "Formatting going on ...."

      - name: Lint with ESLint
        run: echo "Linting going on..."